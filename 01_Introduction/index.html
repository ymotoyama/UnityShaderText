<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="ROBOTS" content="NOINDEX,NOFOLLOW,NOARCHIVE">
    <title>はじめに</title>
    <link rel="stylesheet" href="../style.css">
    <style>
       
    </style>
  </head>
  <body>
    <p class="title">はじめに</p>
    <ol id="mozToc">
    </ol>
    <h1>リアルタイム3D CG およびシェーダーの歴史</h1>
    <p>シェーダーほど、初心者が学習しづらい技術も無いと思います。シェーダーを理解するには、そもそもシェーダーという技術が無かった頃の話から始めなければなりません。<br>
      （※なお、以下の歴史の説明には、細かい部分で誤りがある可能性があります。雰囲気で読んでください。）</p>
    <h2>1980年代</h2>
    <p>なんとこの頃から既に3Dゲームは存在しました。でもまだまだ簡素なものでした。</p>
    <img src="image/StarWars.gif" alt="">
    <p><a href="https://www.youtube.com/watch?v=IqE14T3hf7Y">https://www.youtube.com/watch?v=IqE14T3hf7Y</a></p>
    <p>これは1983年製、ATARI社の「STAR WARS」というゲームです。一度に表示する頂点数は多く見積もっても100個ほどでしょうか？<br>
      また、全てが直線で表現されており、面はありません。この程度の計算なら、当時のCPUでも処理できたようです。</p>
    <p>ってか、西洋人はホント3D好きだな…</p>
    <h2>1990年代前半</h2>
    <p>3Dの描画をリアルにするためには、もっと頂点数を増やさなければなりません。また、線だけではなく面を描画する必要があります。</p>
    <p><img src="image/VirtuaFighter.gif" alt=""></p>
    <p>これは1993年製、SEGAの「バーチャファイター」。今見るとショボいですが、当時としては全ゲーマーに衝撃を与えたものです。<br>
      このような画面を作るためには、数千個の頂点座標の計算と、数万ピクセルの色の決定を毎フレーム行う必要があります。<br>
      一つ一つは単純な計算（行列計算、つまり掛け算と足し算の積み重ね）ですが、回数が膨大なため、当時のCPUではとても間に合いませんでした。そのため、単純計算の並列処理が得意な3Dグラフィック専用ハードウェアが登場しました。現在のGPUの前身です（当時はまだGPUという呼称が無かった）。</p>
    <h2>1990年代後半</h2>
    <p>前述の3Dグラフィック専用ハードウェアは「<strong>GPU</strong>」と呼ばれるようになりました。<br>
      そしてどんどん進化していきました。<br>
      それを制御するためのライブラリである<strong>DirectX</strong>や<strong>OpenGL</strong>も登場し、GPUと共に進化していきました。</p>
    <p><img src="image/Pot.png" alt=""></p>
    <p>この頃は、アプリ開発者がGPUに対して直接命令を実行させることは出来ず、DirectXやOpenGLがあらかじめ用意した命令を呼ぶことでしか、GPUに描画を行わせることはできませんでした。<br>
      GPUの性能が上がるにつれて、その性能を活かした様々な新技法が考案されていきました。そしてそれらを実現するために、DirectXやOpenGLには新しい命令が次々と追加されていきました。<br>
      光沢を指定するための命令。テクスチャを使うための命令。ライトを指定するための命令。フォグに関する命令。その他諸々…</p>
    <h2>2000年代初頭</h2>
    <p>GPUの進化は止まりません。すると、問題が起き始めました。<br>
      アプリ開発者が望むあらゆる描画機能をDirectXやOpenGLといったライブラリに追加するのが難しくなってきたのです。多様な機能を実装するには手間もかかるし、追加したとしてもライブラリが肥大化してしまう。<br>
      そこで、<strong>「ライブラリ側が描画命令を提供することはやめ、アプリ開発者に命令を書いてもらおう」ということになりました</strong>。<br>
      そのためにアプリ開発者が記述するプログラムが「<strong>プログラマブルシェーダー</strong>」、いわゆる「<strong>シェーダー</strong>」です。</p>
    <p>シェーダーの登場により、アプリ開発者の手間は増えましたが、自由度は飛躍的に向上しました。発想次第で、様々な表現が可能となりました。</p>
    <p>シェーダーが使用可能となった最初の家庭用ゲーム機はXboxです。PlayStationにおいては3から使用可能になりました。</p>
    <p><img src="image/Adam.jpg" alt="" style="width: 506px; height: 280px;"></p>
    <p>今日の極めてリアルなゲーム画面は、シェーダーのたまものです。</p>
    なお、シェーダー登場以前の、ライブラリが提供していた命令群のことは、区別のために「固定機能」と呼ばれます。<br>
    固定機能を使った処理の流れは「固定機能パイプライン」と呼ばれます。2020年現在、ほぼ使われることはありません。
    <p>当時のシェーダーの役割は2つです。</p>
    <ul>
      <li>頂点の画面上での位置を計算すること</li>
      <li>画面のピクセルの色を計算すること</li>
    </ul>
    <p>それぞれを行うシェーダープログラムを、「<strong>頂点シェーダー</strong>」、「<strong>フラグメントシェーダー</strong>」と呼びます。<br>
      （ピクセルの色を計算するシェーダーのことを、OpenGLは「フラグメントシェーダー」、DirectXは「ピクセルシェーダー」と呼んでいます（勘弁してくれ）。<br>
      　Unityも「フラグメントシェーダー」と呼んでいるため、この授業では「フラグメントシェーダー」と呼んでいきます）</p>
    <h2>2007年以降</h2>
    <p>DirextX10、11、12が登場し、上述の頂点シェーダーとフラグメントシェーダーに加え、いくつものシェーダーが追加されました（ジオメトリシェーダー、テッセレーターなど）。<br>
      これらにより、さらに高度で多彩な表現が可能となりました。</p>
    <p>※ただ、ジオメトリシェーダーはたまに使う、テッセレーターはほとんど使われていない、といったレベルです。今でも「シェーダーを書く」と言った場合はほとんど「頂点シェーダーとフラグメントシェーダーを書くこと」を指します。</p>
    <h2>2014年以降</h2>
    <p>「物理ベースレンダリング」という描画手法が流行り始めました（そして今では当たり前のものとなっています）。</p>
    <p>従来、物体表面の色や光沢を決める計算は、物理法則を無視したものでした。簡単な計算で、なるべくそれっぽい絵が出れば良い、というものでした。<br>
      しかし、物理ベースレンダリングでは、物理法則（物体表面における光の反射や吸収）をある程度現実に基づいて計算します。<br>
      そのため、リアルな描画結果が得られるというものです。（現実に基づいているので、現実のパラメーターを真似すればリアルな描画結果になる、そのため、試行錯誤の必要が無い、誰がやっても安定して高品質な見た目になる、といった利点もあります。これは近年の大規模開発に有利です）</p>
    <p>物理ベースレンダリングは、もちろん従来の手法よりも描画負荷は高いのですが、GPUの進化により、現実的なものとなりました。<br>
      （モバイル（スマホ）ではまだ一般的ではありませんが、一般的になるのも時間の問題でしょう）</p>
    <h2>2019年以降</h2>
    <p>従来は処理負荷の観点で実現できなかったリアルタイムレイトレーシングが行えるようになりました。</p>
    <p><img src="image/RealTimeRayTracing.gif" alt=""></p>
    <p><a href="https://www.youtube.com/watch?v=lMSuGoYcT3s">https://www.youtube.com/watch?v=lMSuGoYcT3s</a></p>
    <p>この映像がリアルタイムレンダリング…すげえ…</p>
    <p>2020年現在、リアルタイムレイトレーシングを使ったゲームはまだそれほど多くはありませんが、今後、AAAタイトルなどではどんどん使われるようになっていくことでしょう。<br>
      CGアニメーション制作のリアルタイムレンダリング化も進むかもしれません。</p>
    <p><br>
    </p>
    <p><br>
    </p>
  </body>
</html>
